<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>在GNU/Linux中修改T9键盘映射 | SENLINOS ON THE WEB</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="Comics Art, Drawing and Painting with GNU/Linux.">
	<link rel="stylesheet" href="/css/main1.css">
	<link rel="stylesheet" href="/css/float.css">
	<link rel="stylesheet" href="/css/fancybox.css">
	<link rel="stylesheet" href="/css/themes/mysite.css">
	<link rel="icon" href="/icons/16.png" sizes="16x16" type="image/png">
	<link rel="icon" href="/icons/32.png" sizes="32x32" type="image/png">
		
</head>
<body>
	<header class="header">
	<a class="logo logoh" href="/"><img class="wlogo" src="/img/senlinos-website-logo.svg"/> SENLINOS</a><a id="jcomm"></a>
	
        <div id="main1">

<div style="float:left" onclick="document.all.child1.style.display=(document.all.child1.style.display =='none')?'':'none'" >
<a class="logo" href="#"><img class="imgboa" alt="lang" title="语言/Languages" src="/img/lang.svg"/></a></div>

<div style="float:left" onclick="document.all.child2.style.display=(document.all.child2.style.display =='none')?'':'none'" >
<a class="logo" href="#"><img class="imgboa" alt="mirror" title="镜像站/Mirror Site" src="/img/mirror.svg"/></a></div>

<div style="float:left" onclick="document.all.child3.style.display=(document.all.child3.style.display =='none')?'':'none'" >
<a class="logo" href="#"><img class="simgboa" alt="sponsor" title="赞助/Sponsor" src="/img/sponsor.svg"/></a></div>

</div>

<nav class="main-nav main-nav--right" role="navigation">
	<button id="toggle" class="main-nav__btn" aria-label="Menu toggle" aria-expanded="false" tabindex="0">
		<div class="main-nav__btn-box" tabindex="-1">
			<svg class="main-nav__icon icon-menu" width="18" height="18" viewBox="0 0 18 18">
				<path class="icon-menu__burger" d="M18 0v3.6H0V0h18zM0 10.8h18V7.2H0v3.6zM0 18h18v-3.6H0V18z"/>
				<path class="icon-menu__x" d="M11.55 9L18 15.45 15.45 18 9 11.55 2.55 18 0 15.45 6.45 9 0 2.55 2.55 0 9 6.45 15.45 0 18 2.55 11.55 9z"/>
			</svg>
		</div>
	</button>
	<ul id="menu" class="main-nav__list">
			<li class="main-nav__item">
				<a class="main-nav__link" href="/">
					
					<span class="main-nav__text">首页</span>
					
				</a>
			</li>
			<li class="main-nav__item">
				<a class="main-nav__link" href="/comics/">
					
					<span class="main-nav__text">漫画</span>
					
				</a>
			</li>
			<li class="main-nav__item">
				<a class="main-nav__link" href="/post/">
					
					<span class="main-nav__text">博客</span>
					
				</a>
			</li>
			<li class="main-nav__item">
				<a class="main-nav__link" href="/about/">
					
					<span class="main-nav__text">关于</span>
					
				</a>
			</li>
	</ul>
</nav>

</header>
	<div class="primary">
	
	<main class="main">
	<center><div id="child1" style="display:none">
| <a href="/">中文</a> | <a href="/en/">English</a> |
</div></center>

	<center><div id="child2" style="display:none">
<a href="https://senlinos.com"><img style="width: 35px; height: 19px;" alt="main" title="SenlinOS.com" src="/img/main.svg"/></a> | <a href="https://senlinos.github.io/">GitHub Pages</a> | <a href="https://senlinos.bitbucket.io/">Bitbucket-io</a> | <a href="https://senlinos.gitlab.io/">GitLab Pages</a>
</div></center>

	<center><div class="sponsor" id="child3" style="display:none">
<div class="img-group"><a rel="noopener noreferrer" target="_blank" href="https://afdian.net/@senlinos"><img class="afdimg" alt="afdian" title="爱发电" src="/img/my-aifadian.png" /></a><div class="img-tip">afdian.net/@senlinos</div></div>
</div></center>

		
		<div class="single block">
			<article class="entry">
	<div class="entry__meta meta mb">
	<time class="entry__meta-published meta-published" datetime="2018-11-29T00:38:43&#43;08:00">2018-11-29</time>
	</div>
				<center><h1 class="entry__title title-bottom">在GNU/Linux中修改T9键盘映射</h1></center>
				<div class="entry__content"><p><mark>2021-05-24 更新</mark>，删除了以前用的键位映射的方法，因为旧方法是改变系统设置，单手键盘与电脑键盘上的键位一同改变。
<br />新方法是只改变指定硬件的键位，也就是只改变T9单手键盘的键位，不会影响到电脑键盘。</p>

<p><img src="/img/delux-t9.jpg" alt="T9" /></p>

<p>在Xubuntu系统中，按 <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>T</kbd> 打开终端：</p>

<ul>
<li><strong>安装 evtest：</strong><code>sudo apt install evtest</code></li>
<li><strong>继续命令：</strong><code>sudo evtest</code>，会看到所有设备的列表，“HID 0433:0004”就是T9单手键盘，这时输入它的编号。（HID的前面，每次都不同）</li>

<li><p><strong>继续操作</strong>，在列出所有按键信息后，显示<code>Testing ...</code>，这时按T9单手键盘上需要改动的键位，就会列出按键的信息。</p>

<p>按 <kbd>F1</kbd>、<kbd>F3</kbd>、<kbd>F4</kbd>、<kbd>F6</kbd>，按键信息为：</p>

<pre><code>Event: time 1621842064.020258, type 4 (EV_MSC), code 4 (MSC_SCAN), value 7003a
Event: time 1621842064.020258, type 1 (EV_KEY), code 59 (KEY_F1), value 0
Event: time 1621842064.020258, -------------- SYN_REPORT ------------
Event: time 1621842073.220187, type 4 (EV_MSC), code 4 (MSC_SCAN), value 7003c
Event: time 1621842073.220187, type 1 (EV_KEY), code 61 (KEY_F3), value 0
Event: time 1621842073.220187, -------------- SYN_REPORT ------------
Event: time 1621842075.236176, type 4 (EV_MSC), code 4 (MSC_SCAN), value 7003d
Event: time 1621842075.236176, type 1 (EV_KEY), code 62 (KEY_F4), value 0
Event: time 1621842075.236176, -------------- SYN_REPORT ------------
Event: time 1621842077.148162, type 4 (EV_MSC), code 4 (MSC_SCAN), value 7003f
Event: time 1621842077.148162, type 1 (EV_KEY), code 64 (KEY_F6), value 0
</code></pre></li>
</ul>

<p>但这时按T9单手键盘的 <kbd>音量减VOL-</kbd> 与 <kbd>音量加VOL+</kbd> 按键时没有反映，因为这些键位在另一个HID中。
<br />按 <kbd>Ctrl</kbd>+<kbd>C</kbd> 终止以上操作，再次使用命令<code>sudo evtest</code>，输入“HID 0433:0004 Consumer Control”的编号。（HID的前面，每次都不同）</p>

<ul>
<li><p>按 <kbd>音量减VOL-</kbd> 与 <kbd>音量加VOL+</kbd>，按键信息为：</p>

<pre><code>Event: time 1621842580.201548, type 4 (EV_MSC), code 4 (MSC_SCAN), value c00ea
Event: time 1621842580.201548, type 1 (EV_KEY), code 114 (KEY_VOLUMEDOWN), value 0
Event: time 1621842580.201548, -------------- SYN_REPORT ------------
Event: time 1621842583.329525, type 4 (EV_MSC), code 4 (MSC_SCAN), value c00e9
Event: time 1621842583.329525, type 1 (EV_KEY), code 115 (KEY_VOLUMEUP), value 0
</code></pre></li>
</ul>

<p>按 <kbd>Ctrl</kbd>+<kbd>C</kbd> 终止以上操作。</p>

<p>以上就是我们需要的键位信息，<code>(EV_MSC), code 4 (MSC_SCAN), value 7003a</code> 中的<code>7003a</code>是需要使用的键位码号。
<br />样式为：<strong>KEYBOARD_KEY_7003a</strong>，其他按键替换键位码号即可。</p>

<hr />

<p>在列出的T9单手键盘的设备列表中可以看到设备的<code>evdev:input</code>信息：</p>

<pre><code>Input device ID: bus 0x3 vendor 0x433 product 0x4 version 0x111
Input device name: &quot;HID 0433:0004&quot;
</code></pre>

<p>使用的样式为：<code>b0003v0433p0004e0111-e0*</code>，b0003、v0433、p0004、e0111：
<br /><code>0003</code>是USB键盘通用的数值，<code>0433</code>与<code>0004</code>就是<code>Input device name</code>中的数值，<code>0111</code>是<code>Input device ID中的version值，x不需要填写</code>。</p>

<ul>
<li><strong>在终端中输入：</strong><code>vi 99-mykeyboard.hwdb</code>，按回车键后，复制下方代码，然后在终端中按 <kbd>MMB/鼠标中键</kbd> 或 <kbd>Shift</kbd>+<kbd>INS</kbd> 进行粘贴：</li>
</ul>

<pre><code>evdev:input:b0003v0433p0004e0111-e0*
 KEYBOARD_KEY_7003a=enter
 KEYBOARD_KEY_7003c=minus
 KEYBOARD_KEY_7003d=kpplus
 KEYBOARD_KEY_7003f=backspace
 KEYBOARD_KEY_c00ea=btn_right
 KEYBOARD_KEY_c00e9=btn_middle
</code></pre>

<p>按 <kbd>Esc</kbd>，按 <kbd>:</kbd>（Shift+;）、输入 <strong>wq</strong> 再按 <kbd>Enter</kbd>，完成操作。</p>

<p><code>KEYBOARD_KEY_7003a=enter</code>的意思是将 <kbd>F1</kbd> 改为<kbd>Enter/回车键</kbd>，<code>enter</code>等键位的名字可以在终端中列出的信息中搜到，需要使用小写。</p>

<ul>
<li><strong>继续命令：</strong><code>sudo cp 99-mykeyboard.hwdb /etc/udev/hwdb.d</code> 与
<br /><code>sudo systemd-hwdb update &amp;&amp; sudo udevadm control --reload &amp;&amp; sudo udevadm trigger</code></li>
</ul>

<p><img src="/img/delux-t9-fkey.jpg" alt="T9" /></p>

<p>现在T9单手键盘的键鼠位映射已经完成，并实时生效，不需要重启系统，修改也不会影响到电脑键盘～太酷了！</p>

<blockquote>
<p>参考/Reference：<a href="https://github.com/DIGImend/digimend-kernel-drivers/issues/474">https://github.com/DIGImend/digimend-kernel-drivers/issues/474</a></p>
</blockquote>
</div>
				
				<footer class="entry__footer">
					
<div class="cctags">
	<a class="entry__cc btn" rel="noopener noreferrer" target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/"><img class="ccimg" src="/img/cc-by-sa.svg" title="License: CC BY-SA 4.0" alt="cc-by-sa"/></a>
			<a class="entry__tag btn" href="/tags/hardware-linux/">Hardware Linux</a>
</div>
				</footer>
				
			</article>
		</div>

	
      <div class="pagination">
        <div class="pagination__buttons">
          
            <span class="button previous">
              <a href="/post/slos-gimpainter-released/">
                <span class="button__icon">⬅</span>
                <span class="button__text">我的新项目 SLOS-GIMPainter 发布</span>
              </a>
            </span>
          
          
            <span class="button next">
              <a href="/post/linuxwacom-ctl671-settings/">
                <span class="button__text">XFCE桌面中设置Wacom CTL-671</span>
                <span class="button__icon">➡</span>
              </a>
            </span>
          
        </div>
    </div>


	
<div class="authorbox block">
	<div class="author">
		<figure class="author__avatar">
			<img class="author__img" alt="森林OS (SenlinOS) avatar" src="/img/author.jpg" height="90" width="90">
		</figure>
		<div class="author__body">
			<div class="author__name">
				森林OS (SenlinOS)
			</div>
			<div class="author__bio">Comics Art with GNU/Linux</div>
		<div style="text-align: left;"><img style="border: 0px solid ; width: 209px; height: 20px;" alt="yuyu" src="/img/yuyu.png"/></div>
		<div style="text-align: left;"><img style="border: 0px solid ; width: 209px; height: 20px;" alt="yuyu1" src="/img/yuyu1.png"/></div>
		</div>
	</div>
</div>

	



	<div class="page block">
			<div style="text-align: right;"><a href="#top" target="_self"><img style="border: 0px solid ; width: 32px; height: 32px;" alt="Up" title="Up" src="/img/up.svg"/></a></div>
</div>
	</main>

	</div>
	<footer class="footer">
<div class="footer__social social">
		<a class="social__link" rel="noopener noreferrer" href="https://twitter.com/SenlinOS" title="Twitter" target="_blank">
			<svg class="social__icon" aria-label="Twitter" role="img" width="32" height="32" viewBox="0 0 512 512"><path
     d="m 448.70589,148.27098 a 80.667579,80.667579 0 0 1 -44.81533,13.44461 80.667579,80.667579 0 0 0 35.85226,-44.81533 80.667579,80.667579 0 0 1 -50.41723,19.04652 80.667579,80.667579 0 0 0 -136.68673,72.82489 224.07661,224.07661 0 0 1 -162.455557,-82.90834 80.667579,80.667579 0 0 0 24.648437,105.31601 80.667579,80.667579 0 0 1 -35.852267,-7.84268 80.667579,80.667579 0 0 0 62.741467,77.30643 80.667579,80.667579 0 0 1 -35.85226,1.12038 80.667579,80.667579 0 0 0 75.06566,56.01915 224.07661,224.07661 0 0 1 -117.64023,32.4911 224.07661,224.07661 0 0 0 346.19838,-200.54856 224.07661,224.07661 0 0 0 39.2134,-41.45418z"/></svg>
		</a>
		<a class="social__link" rel="noopener noreferrer" href="https://space.bilibili.com/14824534/dynamic" title="B站" target="_blank">
			<svg class="social__icon" aria-label="Bilibili" role="img" width="32" height="32" viewBox="0 0 512 512"><path
     d="m 104.14136,54.699034 c -1.1151,0 -69.230049,27.873409 -70.002125,28.64552 -0.518811,0.518788 0.62742,7.01978 2.542226,14.481637 1.914794,7.461879 5.665182,26.353059 8.307657,41.946819 6.432815,37.96158 31.800592,241.41542 35.001066,280.68965 1.40115,17.19423 2.998999,32.68476 3.540963,34.45631 0.800607,2.61696 5.414997,2.94217 24.650543,1.63428 57.08504,-3.8813 91.77751,-11.51896 123.20743,-27.05658 41.38061,-20.45689 61.33134,-40.80388 61.33134,-62.51168 0,-8.08844 -1.3312,-10.94365 -8.30765,-17.52325 -10.65738,-10.0512 -45.66842,-26.9977 -68.05007,-32.95821 -23.44597,-6.24387 -62.04654,-10.36318 -82.62254,-8.80702 -9.27795,0.70169 -17.35053,0.48658 -17.93181,-0.45396 -2.82833,-4.57635 -8.35993,-102.59784 -9.76035,-173.28036 -0.86402,-43.607743 -1.71982,-79.263156 -1.90668,-79.263156 z m 284.68456,47.439866 -23.92422,0.40857 c -13.15711,0.21269 -24.20535,0.71101 -24.55978,1.13492 -0.35447,0.42392 1.20222,11.73574 3.49557,25.10453 10.5604,61.56055 22.12166,156.32061 29.91661,245.37079 1.39314,15.91526 3.07602,30.69828 3.72257,32.86744 0.90578,3.03861 4.47224,4.13589 15.5258,4.76667 7.89053,0.4503 15.79241,1.02581 17.56862,1.27111 3.58636,0.49536 3.80158,4.5969 -4.17654,-79.39933 -2.53956,-26.73763 -6.8194,-79.88097 -9.48797,-118.07758 -2.66857,-38.19659 -5.55242,-79.33399 -6.44637,-91.42956 z m -74.08789,74.0879 c -10.19888,0 -11.51944,0.55097 -11.07686,4.63049 1.5656,14.43201 5.44801,45.05819 6.53717,51.52563 1.12316,6.66948 2.09428,7.52199 8.67082,7.49046 13.94209,-0.0667 14.16548,-0.73388 10.62287,-33.86616 l -3.17778,-29.78042 z m -26.28485,3.49557 c -3.36987,0.0174 -8.34608,0.62925 -11.07689,1.36192 -4.31156,1.1568 -4.74091,2.31664 -3.08699,8.67082 1.04754,4.02447 3.7291,17.9403 5.94701,30.96075 4.00227,23.49559 4.05957,23.66718 9.98731,22.38072 12.01392,-2.60722 12.13753,-2.70332 10.84989,-13.02894 -6.57813,-52.75184 -5.9919,-50.37957 -12.62033,-50.34527 z m 161.06852,2.04286 1.49809,7.35432 c 0.81028,4.05136 1.45271,18.15967 1.45271,31.36933 v 24.015 h 11.39466 11.44004 l -0.45397,-30.64296 -0.40857,-30.68837 -12.43877,-0.72636 z m -18.11341,0.22699 c -11.08767,0 -11.7852,0.33708 -10.62287,5.22065 0.68181,2.86475 1.9668,16.95482 2.85999,31.27853 l 1.6343,26.01248 h 8.98861 8.9432 v -31.23313 -31.27853 z m -96.55942,78.21903 c -1.89839,-1.89848 -8.53287,-1.85494 -25.10452,0.1816 -12.39296,1.52297 -22.74891,3.03579 -23.01628,3.31397 -0.47308,0.49215 17.54068,94.54118 27.28361,142.41038 4.78832,23.52612 4.93432,23.78537 10.89527,22.6531 3.32232,-0.63106 11.51981,-1.80957 18.2042,-2.63301 8.65971,-1.0668 12.121,-2.49254 12.121,-4.99369 -10e-6,-1.93063 -2.09785,-20.85143 -4.6759,-42.03761 -2.57805,-21.18614 -6.57449,-56.0123 -8.89779,-77.40187 -2.32335,-21.38959 -5.38988,-40.07314 -6.80959,-41.49287 z m 89.79529,5.12986 1.22572,8.67082 c 0.67508,4.77458 3.82274,38.88963 6.99112,75.81298 3.1684,36.92337 6.34222,71.08383 7.08194,75.85839 1.33787,8.63528 1.41545,8.67084 12.43878,8.67084 6.09501,0 14.34451,-0.65356 18.3404,-1.45272 l 7.26351,-1.45269 -1.22573,-81.07903 c -0.69349,-44.58617 -1.82489,-81.94393 -2.49684,-83.03114 -0.6719,-1.08715 -12.11359,-1.99745 -25.42233,-1.99745 z m -274.47025,83.93904 c 0.70616,-0.70615 14.6385,3.61953 30.96075,9.62417 29.84467,10.97929 37.15022,14.3051 35.13728,15.84357 -0.59975,0.45835 -7.84002,6.08188 -16.11594,12.48414 -8.27593,6.40228 -21.01859,15.94383 -28.28233,21.24581 l -13.21052,9.66955 -1.18033,-7.53588 c -4.50525,-27.68942 -8.38944,-60.25086 -7.30891,-61.33136 z"/></svg>
		</a>
		<a class="social__link" rel="noopener noreferrer" href="https://github.com/SenlinOS" title="GitHub" target="_blank">
			<svg class="social__icon" aria-label="GitHub" role="img" width="32" height="32" viewBox="0 0 512 512"><path
 d="m 126.0641,106.44251 c -2.7343,0.14062 -4.06244,0.56249 -4.06244,0.56249 -13.99967,34.9991 -5.99988,60.99931 -2.99996,66.99917 -15.99959,17.99956 -25.999682,40.99986 -25.999682,68.99915 0,97.99755 58.999982,119.99858 115.998572,125.99844 -6.99983,6.99982 -13.99985,18.00001 -15.99981,34.99957 -14.99962,5.99985 -51.99963,16.99929 -73.99908,-21.99972 0,0 -14.00016,-23.99975 -39.999512,-25.99968 0,0 -24.99939,2e-4 -0.99999,15.99979 0,0 15.99996,7.00031 27.999652,36.99955 0,0 15.00072,43.99925 85.99895,27.99965 l 0.43743,48.21816 c -0.78878,12.49227 -6.96077,20.1301 -19.56219,26.78092 h 166.18544 c -12.59029,-6.64495 -18.76461,-14.27701 -19.56225,-26.74968 l 0.032,-0.032 0.0944,-12.18735 0.18752,-20.93725 h -0.0624 l 0.24847,-35.09256 c 0,-23.9994 -8.00003,-39.9996 -17.99978,-47.99941 56.99858,-5.99986 116.99856,-28.00089 116.99856,-125.99844 0,-27.99929 -10.00006,-50.99959 -25.99968,-68.99915 2.99992,-5.99985 10.9997,-32.00007 -2.99996,-66.99917 0,0 -21.00037,-6.99949 -69.99914,25.99968 -41.99897,-11.99969 -85.99947,-11.99969 -127.99842,0 -36.74909,-24.74937 -57.73376,-26.98402 -65.93669,-26.56217 z"/></svg>
		</a>
		<a class="social__link" rel="noopener noreferrer" href="https://www.youtube.com/@SenlinOS" title="YouTube" target="_blank">
			<svg class="social__icon" aria-label="YouTube" role="img" width="32" height="32" viewBox="0 0 512 512"><path
     d="m 126.62325,120.21904 c -31.541334,0 -56.9383,25.39697 -56.9383,56.9383 v 194.97143 c 0,31.5413 25.396966,56.93827 56.9383,56.93827 H 385.3768 c 31.54131,0 56.93825,-25.39697 56.93825,-56.93827 V 177.15734 c 0,-31.54133 -25.39694,-56.9383 -56.93825,-56.9383 z m 76.71979,93.6263 52.65699,30.37539 52.65698,30.40669 -52.65698,30.40665 -52.65699,30.40669 v -60.81334 z"/></svg>
		</a>
</div>
        <span class="footer__copyright-credits">Powered by <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> & Theme based on <a href="https://github.com/vimux/binario" rel="nofollow noopener" target="_blank">Binario</a></span>
	<div class="footer__copyright">© 2017-2023 森林OS (SenlinOS) </div>
</footer>

<script src="/js/menu.js"></script>
<script src="/js/jquery-3.4.1.min.js"></script>
<script src="/js/fancybox.min.js"></script>
</body>
</html>